{% extends "base.html" %}

{% block title %}Scene list{% endblock %}

{% block content %}

{% if scenes %}
    <div class="scenes">
        <table class="scenesTable">
            {% for scene in scenes %}
{#                TODO use a scenen template here share with movie/detail.html #}
                {% if scene.isRestricted %}
                    <tr><td colspan="4" align="left">Restriced Scene: {{ scene.title }}</td></tr>
                {% else %}
                    <tr class="header"><th align="left">{{ scene.title }}</th><th>Actors</th><th>Genres</th><th>Play</th></tr>
                    <tr class="scene">
                        <td class="animatedGif">
                            <a href="{{ scene.sceneRelPath }}">
                                <!-- TODO animated -->
                                {% if movie.backCover %}
                                    <img src="{{ scene.stillImage }}" alt="{{ scene.title }}">
                                {% else %}
                                    <img src="/static/img/x.png" width="20" height="22" alt="{{ scene.title }}">
                                {% endif %}
                            </a>
                        </td>
                        <td class="actors">
                            {% if scene.actors %}
                                {% for actor in scene.actors %}
                                    <a href="/actor/{{ actor }}/">{{ actor }}</a>,
                                {% endfor %}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td class="genres">
                            {% if scene.genres %}
                                {% for genre in scene.genres %}
                                    <a href="/genre/{{ genre.shortDescription }}/">{{ genre.shortDescription }}</a>,
                                {% endfor %}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td class="play">
                            {% if scene.sceneRelPath %}
                                {% if scene.supportedFormat %}
                                    <div id="videoPlayer">
                                        <p id="container1">Please install the Flash Plugin</p>
                                        <script type="text/javascript">
                                            var flashvars = { file:'{{ mediaBasePath }}/{{ scene.sceneRelPath }}',autostart:'false' };
                                            var params = { allowfullscreen:'true', allowscriptaccess:'always' };
                                            var attributes = { id:'playerID', name:'playerName' };
                                            swfobject.embedSWF('/static/js/vendor/player.swf','container1','240','135','9.0.115','false', flashvars, params, attributes);
                                        </script>
                                    </div>
                                {% else %}
                                    Movie format not supported.
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>
    </div>
{% endif %}

{% endblock %}
